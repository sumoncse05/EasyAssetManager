@model IEnumerable<EasyAssetManagerCore.Models.EntityModel.Account>
@{
    Layout = null;
}
@if (Model != null && Model.Any())
{
    <table class="table table-striped table-bordered table-hover dataTables-example table-responsive" id="tb-agentAccount" width="100%">
        <thead>
            <tr>
                <th>Customer No (CIF)</th>
                <th>Branch</th>
                <th>Account No</th>
                <th>Account Name</th>
                <th>Open Date</th>
                <th>Status</th>
                <th>Ins By</th>
                <th>Ins Date</th>
                <th>Update Status</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var v in Model)
            {
                var textValue = "fa fa-sign-in";
                <tr>
                    <td>@v.customer_no</td>
                    <td>@v.branch_code</td>
                    <td>@v.cust_ac_no </td>
                    <td>@v.ac_desc</td>
                    <td>@v.ac_open_date</td>
                    <td>@v.status</td>
                    <td>@v.ins_by</td>
                    <td>@v.ins_date</td>
                    @if (@v.status == "Y")
                    {
                        textValue = "fa fa-sign-out";
                    }
                    <td>
                        <button type="button" class="btn btn-success gridButton" onclick="updateStatus('@v.agent_id','@v.cust_ac_no','@v.ac_desc','@v.status');">
                            <i class="@textValue"></i>
                        </button>
                    </td>
                </tr>
            }
        </tbody>
    </table>
}
else
{
    <p>No record found.</p>
}
<div class="modal fade" id="updateStatus" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel"> Update Agent Account</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <form>
                    <input type="hidden" id="modalUpdateagent_id" name="modalUpdateagent_id" class="form-control form-element" />
                    <div class="form-group">
                        <label class="col-form-label">Account No:</label>
                        <input type="text" id="modalUpdatecust_ac_no" name="modalUpdatecust_ac_no" class="form-control form-element" readonly />

                    </div>
                    <div class="form-group">
                        <label class="col-form-label">Account Name:</label>
                        <input type="text" id="modalUpdateac_desc" name="modalUpdateac_desc" class="form-control form-element" readonly />
                    </div>
                    <div class="form-group">
                        <label class="col-form-label">Status:</label>
                        <select id="modalUpdatestatus" name="modalUpdatestatus" class="form-control form-element"></select>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <input type="button" value="Update Status" class="btn btn-primary ks-next" onclick="classAgentAccount.updateStatusSubmit()">
                <input type="button" value="Close" class="btn btn-danger ks-next" data-dismiss="modal" id="btnClose">
            </div>
        </div>
    </div>
</div>

<script type="text/javascript">
    $(document).ready(function () {
        ApplicationCommon.makePagination('tb-agentAccount');
    });

    function updateStatus(agent_id, cust_ac_no, ac_desc, status) {
        $('#updateStatus').modal('show');
        combo.getStatus('modalUpdatestatus',false);
        $("#modalUpdateagent_id").val(agent_id);
        $("#modalUpdatecust_ac_no").val(cust_ac_no);
        $("#modalUpdateac_desc").val(ac_desc);
        $("#modalUpdatestatus").val(status);

    };
    
    

</script>

