
@{
    ViewData["Title"] = "Search Account Opening Request";
}

<div class="wrapper wrapper-content animated fadeInRight">

    <div class="row">
        <div class="col-lg-12">

            <div class="ibox" id="divsidebarCollapse">
                <div class="ibox-title">
                    <h5>Search Account Opening Request</h5>
                    <div class="ibox-tools">
                        <a class="collapse-link">
                            <i class="fa fa-chevron-up" id="sidebarCollapse"></i>
                        </a>
                    </div>
                </div>
                <div class="ibox-content" id="sidebarContent">
                    <form id="stepProcess" action="#" class="wizard-big">
                        <fieldset>
                            <div class="row">
                                <div class="col-lg-12">
                                    <div class="form-group row">
                                        <div class="col-xl-2"></div>
                                        <div class="col-xl-2">
                                            <label class="col-form-label">Request Ref No</label>
                                        </div>
                                        <div class="col-xl-3">
                                            <input type="text" id="ac_reg_sl" name="ac_reg_sl" class="form-control form-element" />
                                        </div>
                                        <div class="col-xl-5"></div>
                                    </div>
                                    <div class="form-group row">
                                        <div class="col-xl-2"></div>
                                        <div class="col-xl-2">
                                            <label class="col-form-label">Account Name</label>
                                        </div>
                                        <div class="col-xl-3">
                                            <input type="text" id="account_name" name="account_name" class="form-control form-element" />
                                        </div>
                                        <div class="col-xl-5"></div>
                                    </div>
                                    <div class="form-group row">
                                        <div class="col-xl-5"></div>
                                        <div class="col-xl-2">
                                            <button type="button" class="btn btn-primary" id="search">Search</button>
                                        </div>
                                        <div class="col-xl-3"></div>
                                    </div>
                                </div>
                            </div>
                        </fieldset>
                    </form>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-lg-12">
            <div class="ibox " id="iboxTbl">
                <div class="ibox-title">
                    <h5> Account Opening Request Items</h5>
                    <div class="ibox-tools">
                        <a class="collapse-link">
                            <i class="fa fa-chevron-up" id="iboxTblImg"></i>
                        </a>
                    </div>
                </div>
                <div class="ibox-content" id="iboxContent">
                    <div id="acc_openingreq"></div>
                </div>
            </div>
        </div>
    </div>
</div>


@section scripts{
    <script type="text/javascript">
        var classServiceRequestSearch = function () {
            var init = function () {
                eventInitializer();
            };
            var eventInitializer = function () {
                $('#search').click(searchInitiate);
            };
            var searchInitiate = function () {
                if ($('#ac_reg_sl').val() == '' && $('#account_name').val() == '') {
                    ApplicationCommon.showNotification("2", "Please provide atleast one parameter to search.");
                }
                else {
                    var ac_reg_slno = $('#ac_reg_sl').val();
                    var ac_name = $('#account_name').val().replace(/ /g, "+");
                    $('#acc_openingreq').empty();
                    var url = '/SearchAccountOpeningReq/GetAccountOpenRequest';
                    var ok = $('#acc_openingreq').load(url + '?ac_reg_slno=' + ac_reg_slno + '&&ac_name=' + ac_name);
                }
            };
            var Updatedata = function () {
                if ($("#ac_customer_type").val() == '') {
                    ApplicationCommon.showNotification("Error", "Select Account Type to continue.");
                }
                else if ($("#joint_ac_indicator").val() == '') {
                    ApplicationCommon.showNotification("Error", "Select Operating Mode to continue.");
                }
                else if ($("#no_of_customer").val() == '') {
                    ApplicationCommon.showNotification("Error", "Enter No of Customer to continue.");
                }
                else if ($("#ac_name").val() == '') {
                    ApplicationCommon.showNotification("Error", "Enter Account Name to continue.");
                }
                else {
                    var updateAccountOpen = ApplicationCommon.getData('form-element');
                    var url = '/SearchAccountOpeningReq/UpdateAccountOpening';
                    ApplicationCommon.request(url, 'POST', updateAccountOpen, false, true, false, function (res) {
                        ApplicationCommon.showNotification(res.messageType, res.messageString);
                        if (res.messageType == 1) {
                              $(".modal-backdrop").remove();
                              searchInitiate();
                        }
                    });
                }
            };
            return { init: init, Updatedata: Updatedata };
        }();

        classServiceRequestSearch.init();

    </script>
}